<%= content_for :title, resource.display_name(@record) %>

<div class="mb-8">
  <nav class="flex items-center gap-2 text-sm text-dark-400 mb-4">
    <%= link_to resource.friendly_name.pluralize, resource.index_path, class: "hover:text-dark-200 transition-colors" %>
    <span>/</span>
    <span class="text-dark-200"><%= resource.display_name(@record) %></span>
  </nav>

  <div class="flex items-start justify-between gap-4">
    <div>
      <h1 class="text-3xl font-bold text-dark-50"><%= resource.display_name(@record) %></h1>
      <p class="text-dark-400 mt-1"><%= resource.friendly_name %> details</p>
    </div>

    <div class="flex items-center gap-2">
      <% resource.member_actions.each do |action| %>
        <%= instance_exec(@record, &action) %>
      <% end %>
      <% if resource.actions.include?(:edit) %>
        <%= link_to resource.edit_path(@record), class: "btn btn-secondary" do %>
          <%= inline_svg "icons/pencil.svg", class: "w-4 h-4" %>
          <span>Edit</span>
        <% end %>
      <% end %>
      <% if resource.actions.include?(:destroy) || resource.actions.include?(:delete) %>
        <%= button_to resource.show_path(@record), method: :delete, data: { turbo_confirm: "Are you sure you want to delete this #{resource.friendly_name.downcase}?" }, class: "btn btn-danger" do %>
          <%= inline_svg "icons/trash.svg", class: "w-4 h-4" %>
          <span>Delete</span>
        <% end %>
      <% end %>
    </div>
  </div>
</div>

<div class="card-bg overflow-hidden">
  <dl>
    <% resource.attributes.values.each do |attribute| %>
      <% next if attribute.field.nil? %>
      <% next unless attribute.field.visible?(action_name) %>

      <div class="flex flex-col sm:flex-row sm:items-start gap-1 sm:gap-4 px-6 py-4 border-b border-dark-600 last:border-b-0">
        <dt class="text-sm font-medium text-dark-400 sm:w-48 sm:shrink-0">
          <%= attribute.field.options.label || attribute.name.to_s.titleize %>
        </dt>
        <dd class="text-dark-100 min-w-0 break-words">
          <%= render partial: attribute.field.to_partial_path("show"), locals: { field: attribute.field, record: @record, resource: resource } %>
        </dd>
      </div>
    <% end %>
  </dl>
</div>
