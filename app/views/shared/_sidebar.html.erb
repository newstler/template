<%# Modern dark sidebar navigation - inspired by Anthropic/OpenAI/Lovable %>

<%# Sidebar %>
<aside data-sidebar-target="sidebar"
       class="fixed inset-y-0 left-0 z-40 w-64 bg-dark-900 border-r border-dark-700 transform -translate-x-full lg:translate-x-0 transition-transform duration-200 ease-in-out flex flex-col">

  <%# Logo/Brand %>
  <div class="flex items-center h-16 px-4 border-b border-dark-700">
    <%= link_to root_path, class: "flex items-center gap-3 text-white hover:opacity-80 transition-opacity" do %>
      <div class="w-8 h-8 bg-gradient-to-br from-accent-500 to-accent-700 rounded-lg flex items-center justify-center">
        <%= inline_svg "icons/lightning.svg", class: "w-5 h-5 text-white" %>
      </div>
      <span class="font-semibold text-lg"><%= content_for(:app_name) || "Template" %></span>
    <% end %>
  </div>

  <%# Navigation %>
  <nav class="flex-1 overflow-y-auto py-4 px-3">
    <%# Main Navigation %>
    <div class="space-y-1">
      <%= render "shared/sidebar_link", path: home_path, icon: "home", label: "Home" %>
      <%= render "shared/sidebar_link", path: chats_path, icon: "chat", label: "Chats" %>
    </div>

    <%# AI Section (collapsible) %>
    <div class="mt-6">
      <%= render "shared/sidebar_group", id: "ai", icon: "cube", label: "AI Models" do %>
        <%= render "shared/sidebar_link", path: models_path, icon: "cube", label: "All Models", nested: true %>
      <% end %>
    </div>
  </nav>

  <%# User section %>
  <div class="border-t border-dark-700 p-4">
    <div class="flex items-center gap-3 mb-3">
      <div class="w-8 h-8 bg-dark-700 rounded-full flex items-center justify-center">
        <span class="text-sm font-medium text-dark-300"><%= current_user&.name&.first&.upcase || "U" %></span>
      </div>
      <div class="flex-1 min-w-0">
        <p class="text-sm font-medium text-dark-100 truncate"><%= current_user&.name || "User" %></p>
        <p class="text-xs text-dark-400 truncate"><%= current_user&.email %></p>
      </div>
    </div>
    <%= button_to session_path, method: :delete, class: "w-full flex items-center gap-2 px-3 py-2 text-sm text-dark-400 hover:text-dark-100 hover:bg-dark-800 rounded-lg transition-colors" do %>
      <%= inline_svg "icons/sign-out.svg", class: "w-4 h-4" %>
      Sign Out
    <% end %>
  </div>
</aside>

<%# Mobile overlay %>
<div data-sidebar-target="overlay"
     data-action="click->sidebar#close"
     class="fixed inset-0 z-30 bg-black/50 backdrop-blur-sm hidden lg:hidden"></div>
