<% content_for :title, t(".heading") %>

<div class="max-w-2xl mx-auto">
  <div class="flex items-center justify-between mb-8">
    <h1 class="text-3xl font-bold text-dark-50"><%= t(".heading") %></h1>
    <% if current_membership&.admin? %>
      <%= link_to t(".invite_button"), new_team_member_path(current_team), class: "inline-flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors" %>
    <% end %>
  </div>

  <div class="card-bg overflow-hidden">
    <table class="w-full">
      <thead class="bg-dark-800">
        <tr>
          <th class="text-left text-sm font-medium text-dark-400 px-6 py-3">Name</th>
          <th class="text-left text-sm font-medium text-dark-400 px-6 py-3"><%= t(".role") %></th>
          <th class="text-left text-sm font-medium text-dark-400 px-6 py-3"><%= t(".invited_by") %></th>
          <% if current_membership&.admin? %>
            <th class="text-right text-sm font-medium text-dark-400 px-6 py-3"></th>
          <% end %>
        </tr>
      </thead>
      <tbody class="divide-y divide-dark-700">
        <% @memberships.each do |membership| %>
          <tr>
            <td class="px-6 py-4">
              <div>
                <div class="font-medium text-dark-100"><%= membership.user.name %></div>
                <div class="text-sm text-dark-400"><%= membership.user.email %></div>
              </div>
            </td>
            <td class="px-6 py-4">
              <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium <%= membership.owner? ? 'bg-purple-500/20 text-purple-300' : membership.admin? ? 'bg-blue-500/20 text-blue-300' : 'bg-dark-600 text-dark-300' %>">
                <%= t(".#{membership.role}") %>
              </span>
            </td>
            <td class="px-6 py-4 text-sm text-dark-400">
              <%= membership.invited_by&.name || "â€”" %>
            </td>
            <% if current_membership&.admin? %>
              <td class="px-6 py-4 text-right">
                <% unless membership.user == current_user || (membership.owner? && current_team.memberships.where(role: "owner").count == 1) %>
                  <%= button_to t(".remove"), team_member_path(current_team, membership), method: :delete, class: "text-sm text-red-400 hover:text-red-300", data: { confirm: "Are you sure?" } %>
                <% end %>
              </td>
            <% end %>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>
